var app=angular.module("app",[]);app.run([function(){}]),$(document).ready(function(){!function(t,e){function n(){var n=!1;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?(n=!0,$("html").addClass("touch")):$("html").addClass("pointer"),n}function r(){var e=0;return navigator.userAgent.match(/(iPhone|iPod)/i)&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("CriOS")&&(e=60),"standalone"in t.navigator&&t.navigator.standalone&&(e=0),e}function o(){var n,r=e.createElement("p"),o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(r,null);for(var i in o)void 0!==r.style[i]&&(r.style[i]="translate3d(1px,1px,1px)",n=t.getComputedStyle(r).getPropertyValue(o[i]));return e.body.removeChild(r),void 0!==n&&n.length>0&&"none"!==n}var a=($(".open"),$("#container")),s=null,u=n(),c=r(),o=o(),l=o?" translateZ(0)":"",f="onorientationchange"in t?"orientationchange":"resize",h=u?"touchstart":"mousedown",p=u?"touchmove":"mousemove",d=u?"touchend":"mouseup",m=function(e){this.options={menu:!0,breakpoint:768,menuWidth:265,headerHeight:50,snapThreshold:null,resize:null};for(i in e)this.options[i]=e[i];this.resizeSite(),s=$('<div id="cover" />'),a.find("#scroller").append(s),$(t).on(f,this.resizeSite.bind(this)),a.on(h,this._start.bind(this)),a.on(p,this._move.bind(this)),a.on(d,this._end.bind(this))};return m.prototype={info:{},x:0,dx:0,ox:null,tgt:null,desktop:!1,dimensions:function(){return[this.info.docWidth,this.info.docHeight]},offset:function(){return c},resizeSite:function(){this.info.docHeight=$(t).height(),this.info.docWidth=$(t).width(),this.layout(),this.snapThreshold=null===this.options.snapThreshold?Math.round(.25*this.info.docWidth):/%/.test(this.options.snapThreshold)?Math.round(this.info.docWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold,this.options.resize&&this.options.resize()},layout:function(){this.info.docWidth<this.options.breakpoint?(this.desktop=!1,a.css({width:this.info.docWidth,height:"auto"})):(this.desktop=!0,a.css({width:this.info.docWidth-this.options.menuWidth,height:this.info.docHeight+c})),a.find("#scroller").css({height:this.info.docHeight+c-this.options.headerHeight}),this.hideAddressBar()},hideAddressBar:function(){setTimeout(function(){t.scrollTo(0,1)},50)},_start:function(t){if(!this.initiated&&!this.desktop&&this.options.menu){$("#console").html("start");var e=u?t.originalEvent.touches[0]:t;this.initiated=!0,this.pointX=e.pageX,this.pointY=e.pageY,this.stepsX=0,this.stepsY=0,this.directionLocked=!1,this.x=a.offset().left,this.ox=-this.x+this.pointX,this.tgt=$(t.target),a.css({"transition-duration":"0s"})}},_move:function(t){if(this.initiated&&!this.desktop&&this.options.menu){$("#console").html("move");var e=u?t.originalEvent.touches[0]:t;if(this.stepsX+=Math.abs(e.pageX-this.pointX),this.stepsY+=Math.abs(e.pageY-this.pointY),!(this.stepsX<10&&this.stepsY<10)){if(!this.directionLocked&&this.stepsY>this.stepsX)return void(this.initiated=!1);if(t.preventDefault(),this.directionLocked=!0,this.ox){var n=parseInt(e.pageX)-this.ox;this.dx=n-this.x,this.x=n,this._moveContainer(n)}}}},_end:function(t){if(this.initiated&&!this.desktop&&this.options.menu){var e=u?t.originalEvent.changedTouches[0]:t,n=parseInt(e.pageX)-this.ox;this.dx<=0?this._animateTo(n,0):this._animateTo(n,this.options.menuWidth),0===this.dx&&0===n&&this.tgt.is(".open")&&this._animateTo(this.options.menuWidth,this.options.menuWidth),this.ox=null,this.dx=0,this.initiated=!1}},_animateTo:function(t,e){a.css({"transition-duration":Math.floor(100*t/this.snapThreshold)+"ms",transform:"translate("+e+"px,0)"+l}),this._toggleCover(e)},_moveContainer:function(t){a.css({transform:"translate("+t+"px,0)"+l})},_toggleCover:function(t){t>this.options.menuWidth-50?s.show():s.hide()}},m}(window,document)}),$(document).ready(function(){$(".chat-container").css({height:$(window).height()})});var UI=function(t){function e(e){t("#chat-title").text(e)}return{setTitle:e}}(jQuery);angular.module("app").controller("chatCtrl",["$scope","chatApi","session",function(t,e,n){t.state={welcomeShwn:!1},t.messages=[],t.chatTxtBox="",t.username="",t.users=[],t.sendChatMsg=function(){t.chatTxtBox.length&&(e.sendChatMessage(t.chatTxtBox),t.chatTxtBox="")},e.onUpdateChat(function(e){console.log("updatechat "+e),"string"!=typeof e&&t.messages.push({username:e.username,data:e.data,isMe:n.getUser().username===e.username})}),e.onUpdateUsers(function(t,e){console.log("updateusers "+e)})}]),angular.module("app").controller("welcomeCtrl",["$scope","$rootScope","chatApi","session",function(t,e,n,r){t.room="",t.name=r.getUser().username,t.badUsername=!1,t.init=function(){var o=document.location.pathname||"";return t.room=o,t.name?(n.addUser(t.name),setTimeout(function(){n.switchRoom(t.room)},1),t.username=t.name,e.username=t.name,r.setUser({username:t.name}),t.state.welcomeShwn=!0,void(e.room=o)):void(t.badUsername=!0)}}]),angular.module("app").directive("ngEnter",function(){return function(t,e,n){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(n.ngEnter)}),e.preventDefault())})}}).directive("focus",function(){return{restrict:"A",link:function(t,e,n){t.$watch(n.focus,function(t){t&&e[0].focus()})}}}).filter("cut",function(){return function(t){return t?t.substr(0,8):""}}),angular.module("app").factory("chatApi",["socket","$q",function(t){function e(e){t.on("updatechat",e)}function n(e){t.on("updateusers",e)}function r(e){t.emit("switchRoom",e)}function o(e){t.emit("sendchat",e)}function i(e){t.emit("adduser",e)}return{onUpdateChat:e,onUpdateUsers:n,switchRoom:r,sendChatMessage:o,addUser:i}}]),angular.module("app").factory("session",["$q",function(){function t(t){n=t.username||"",r=t.id||"",localStorage.username=n,localStorage.userId=r}function e(){return{username:n,userId:r}}var n=localStorage.username||"",r=localStorage.userId||"";return{setUser:t,getUser:e}}]),angular.module("app").factory("socket",function(t,e){var n=e.io.connect(),r={on:function(e,r){n.on(e,function(){var e=arguments;t.$apply(function(){r.apply(n,e)})})},emit:function(e,r,o){n.emit(e,r,function(){var e=arguments;t.$apply(function(){o&&o.apply(n,e)})})}};return r.on("error",function(t,e){console.log("ERRROR "+e)}),r}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(t,e,n){"use strict";function r(t,e){return A(new(A(function(){},{prototype:t})),e)}function o(t){return M(arguments,function(e){e!==t&&M(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function i(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function a(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in t&&t[r]===e)return r;return-1}function s(t,e,n,r){var o,s=i(n,r),u={},c=[];for(var l in s)if(s[l].params&&s[l].params.length){o=s[l].params;for(var f in o)a(c,o[f])>=0||(c.push(o[f]),u[o[f]]=t[o[f]])}return A({},u,e)}function u(t,e){var n={};return M(t,function(t){var r=e[t];n[t]=null!=r?String(r):null}),n}function c(t,e,n){if(!n){n=[];for(var r in t)n.push(r)}for(var o=0;o<n.length;o++){var i=n[o];if(t[i]!=e[i])return!1}return!0}function l(t,e){var n={};return M(t,function(t){n[t]=e[t]}),n}function f(t,e){var r=1,i=2,a={},s=[],u=a,c=A(t.when(a),{$$promises:a,$$values:a});this.study=function(a){function l(t,n){if(d[n]!==i){if(p.push(n),d[n]===r)throw p.splice(0,p.indexOf(n)),new Error("Cyclic dependency: "+p.join(" -> "));if(d[n]=r,k(t))h.push(n,[function(){return e.get(t)}],s);else{var o=e.annotate(t);M(o,function(t){t!==n&&a.hasOwnProperty(t)&&l(a[t],t)}),h.push(n,t,o)}p.pop(),d[n]=i}}function f(t){return O(t)&&t.then&&t.$$promises}if(!O(a))throw new Error("'invocables' must be an object");var h=[],p=[],d={};return M(a,l),a=p=d=null,function(r,i,a){function s(){--g||(w||o($,i.$$values),m.$$values=$,m.$$promises=!0,d.resolve($))}function l(t){m.$$failure=t,d.reject(t)}function p(n,o,i){function u(t){f.reject(t),l(t)}function c(){if(!j(m.$$failure))try{f.resolve(e.invoke(o,a,$)),f.promise.then(function(t){$[n]=t,s()},u)}catch(t){u(t)}}var f=t.defer(),h=0;M(i,function(t){v.hasOwnProperty(t)&&!r.hasOwnProperty(t)&&(h++,v[t].then(function(e){$[t]=e,--h||c()},u))}),h||c(),v[n]=f.promise}if(f(r)&&a===n&&(a=i,i=r,r=null),r){if(!O(r))throw new Error("'locals' must be an object")}else r=u;if(i){if(!f(i))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else i=c;var d=t.defer(),m=d.promise,v=m.$$promises={},$=A({},r),g=1+h.length/3,w=!1;if(j(i.$$failure))return l(i.$$failure),m;i.$$values?(w=o($,i.$$values),s()):(A(v,i.$$promises),i.then(s,l));for(var x=0,y=h.length;y>x;x+=3)r.hasOwnProperty(h[x])?s():p(h[x],h[x+1],h[x+2]);return m}},this.resolve=function(t,e,n,r){return this.study(t)(e,n,r)}}function h(t,e,n){this.fromConfig=function(t,e,n){return j(t.template)?this.fromString(t.template,e):j(t.templateUrl)?this.fromUrl(t.templateUrl,e):j(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return T(t)?t(e):t},this.fromUrl=function(n,r){return T(n)&&(n=n(r)),null==n?null:t.get(n,{cache:e}).then(function(t){return t.data})},this.fromProvider=function(t,e,r){return n.invoke(t,null,r||{params:e})}}function p(t){function e(e){if(!/^\w+(-+\w+)*$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(i[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");i[e]=!0,c.push(e)}function n(t){return t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var r,o=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,i={},a="^",s=0,u=this.segments=[],c=this.params=[];this.source=t;for(var l,f,h;(r=o.exec(t))&&(l=r[2]||r[3],f=r[4]||("*"==r[1]?".*":"[^/]*"),h=t.substring(s,r.index),!(h.indexOf("?")>=0));)a+=n(h)+"("+f+")",e(l),u.push(h),s=o.lastIndex;h=t.substring(s);var p=h.indexOf("?");if(p>=0){var d=this.sourceSearch=h.substring(p);h=h.substring(0,p),this.sourcePath=t.substring(0,s+p),M(d.substring(1).split(/[&?]/),e)}else this.sourcePath=t,this.sourceSearch="";a+=n(h)+"$",u.push(h),this.regexp=new RegExp(a),this.prefix=u[0]}function d(){this.compile=function(t){return new p(t)},this.isMatcher=function(t){return O(t)&&T(t.exec)&&T(t.format)&&T(t.concat)},this.$get=function(){return this}}function m(t){function e(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function n(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})}function r(t,e,n){if(!n)return!1;var r=t.invoke(e,e,{$match:n});return j(r)?r:!0}var o=[],i=null;this.rule=function(t){if(!T(t))throw new Error("'rule' must be a function");return o.push(t),this},this.otherwise=function(t){if(k(t)){var e=t;t=function(){return e}}else if(!T(t))throw new Error("'rule' must be a function");return i=t,this},this.when=function(o,i){var a,s=k(i);if(k(o)&&(o=t.compile(o)),!s&&!T(i)&&!U(i))throw new Error("invalid 'handler' in when()");var u={matcher:function(e,n){return s&&(a=t.compile(n),n=["$match",function(t){return a.format(t)}]),A(function(t,o){return r(t,n,e.exec(o.path(),o.search()))},{prefix:k(e.prefix)?e.prefix:""})},regex:function(t,o){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(a=o,o=["$match",function(t){return n(a,t)}]),A(function(e,n){return r(e,o,t.exec(n.path()))},{prefix:e(t)})}},c={matcher:t.isMatcher(o),regex:o instanceof RegExp};for(var l in c)if(c[l])return this.rule(u[l](o,i));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(t,e,n){function r(e){function r(e){var r=e(n,t);return r?(k(r)&&t.replace().url(r),!0):!1}if(!e||!e.defaultPrevented){var a,s=o.length;for(a=0;s>a;a++)if(r(o[a]))return;i&&r(i)}}return e.$on("$locationChangeSuccess",r),{sync:function(){r()}}}]}function v(t,o,i){function a(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function f(t,e){var r=k(t),o=r?t:t.name,i=a(o);if(i){if(!e)throw new Error("No reference point given for path '"+o+"'");for(var s=o.split("."),u=0,c=s.length,l=e;c>u;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!l.parent)throw new Error("Path '"+o+"' not valid for state '"+e.name+"'");l=l.parent}else l=e;s=s.slice(u).join("."),o=l.name+(l.name&&s?".":"")+s}var f=x[o];return!f||!r&&(r||f!==t&&f.self!==t)?n:f}function h(t,e){y[t]||(y[t]=[]),y[t].push(e)}function p(e){e=r(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var n=e.name;if(!k(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(x.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var o=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):k(e.parent)?e.parent:"";if(o&&!x[o])return h(o,e.self);for(var i in E)T(E[i])&&(e[i]=E[i](e,E.$delegates[i]));if(x[n]=e,!e[b]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){w.$current.navigable==e&&c(t,n)||w.transitionTo(e,t,{location:!1})}]),y[n])for(var a=0;a<y[n].length;a++)p(y[n][a]);return e}function d(t,e){return k(t)&&!j(e)?E[t]:T(e)&&k(t)?(E[t]&&!E.$delegates[t]&&(E.$delegates[t]=E[t]),E[t]=e,this):this}function m(t,e){return O(t)?e=t:e.name=t,p(e),this}function v(t,o,a,h,p,d,m){function v(){m.url()!==k&&(m.url(k),m.replace())}function y(t,n,r,i,s){var u=r?n:l(t.params,n),c={$stateParams:u};s.resolve=p.resolve(t.resolve,c,s.resolve,t);var f=[s.resolve.then(function(t){s.globals=t})];return i&&f.push(i),M(t.views,function(n,r){var o=n.resolve&&n.resolve!==t.resolve?n.resolve:{};o.$template=[function(){return a.load(r,{view:n,locals:c,params:u,notify:!1})||""}],f.push(p.resolve(o,c,s.resolve,t).then(function(i){if(T(n.controllerProvider)||U(n.controllerProvider)){var a=e.extend({},o,c);i.$$controller=h.invoke(n.controllerProvider,null,a)}else i.$$controller=n.controller;i.$$state=t,s[r]=i}))}),o.all(f).then(function(){return s})}var E=o.reject(new Error("transition superseded")),S=o.reject(new Error("transition prevented")),C=o.reject(new Error("transition aborted")),P=o.reject(new Error("transition failed")),k=m.url();return g.locals={resolve:null,globals:{$stateParams:{}}},w={params:{},current:g.self,$current:g,transition:null},w.reload=function(){w.transitionTo(w.current,d,{reload:!0,inherit:!1,notify:!1})},w.go=function(t,e,n){return this.transitionTo(t,e,A({inherit:!0,relative:w.$current},n))},w.transitionTo=function(e,n,i){n=n||{},i=A({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},i||{});var a,l=w.$current,p=w.params,x=l.path,T=f(e,i.relative);if(!j(T)){var O={to:e,toParams:n,options:i};if(a=t.$broadcast("$stateNotFound",O,l.self,p),a.defaultPrevented)return v(),C;if(a.retry){if(i.$retry)return v(),P;var U=w.transition=o.when(a.retry);return U.then(function(){return U!==w.transition?E:(O.options.$retry=!0,w.transitionTo(O.to,O.toParams,O.options))},function(){return C}),v(),U}if(e=O.to,n=O.toParams,i=O.options,T=f(e,i.relative),!j(T)){if(i.relative)throw new Error("Could not resolve '"+e+"' from state '"+i.relative+"'");throw new Error("No such state '"+e+"'")}}if(T[b])throw new Error("Cannot transition to abstract state '"+e+"'");i.inherit&&(n=s(d,n||{},w.$current,T)),e=T;var M,R,W=e.path,_=g.locals,X=[];for(M=0,R=W[M];R&&R===x[M]&&c(n,p,R.ownParams)&&!i.reload;M++,R=W[M])_=X[M]=R.locals;if($(e,l,_,i))return e.self.reloadOnSearch!==!1&&v(),w.transition=null,o.when(w.current);if(n=u(e.params,n||{}),i.notify&&(a=t.$broadcast("$stateChangeStart",e.self,n,l.self,p),a.defaultPrevented))return v(),S;for(var z=o.when(_),D=M;D<W.length;D++,R=W[D])_=X[D]=r(_),z=y(R,n,R===e,z,_);var B=w.transition=z.then(function(){var r,o,a;if(w.transition!==B)return E;for(r=x.length-1;r>=M;r--)a=x[r],a.self.onExit&&h.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=M;r<W.length;r++)o=W[r],o.locals=X[r],o.self.onEnter&&h.invoke(o.self.onEnter,o.self,o.locals.globals);if(w.transition!==B)return E;w.$current=e,w.current=e.self,w.params=n,I(w.params,d),w.transition=null;var s=e.navigable;return i.location&&s&&(m.url(s.url.format(s.locals.globals.$stateParams)),"replace"===i.location&&m.replace()),i.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,l.self,p),k=m.url(),w.current},function(r){return w.transition!==B?E:(w.transition=null,t.$broadcast("$stateChangeError",e.self,n,l.self,p,r),v(),o.reject(r))});return B},w.is=function(t,r){var o=f(t);return j(o)?w.$current!==o?!1:j(r)&&null!==r?e.equals(d,r):!0:n},w.includes=function(t,r){var o=f(t);if(!j(o))return n;if(!j(w.$current.includes[o.name]))return!1;var i=!0;return e.forEach(r,function(t,e){j(d[e])&&d[e]===t||(i=!1)}),i},w.href=function(t,e,n){n=A({lossy:!0,inherit:!1,absolute:!1,relative:w.$current},n||{});var r=f(t,n.relative);if(!j(r))return null;e=s(d,e||{},w.$current,r);var o=r&&n.lossy?r.navigable:r,a=o&&o.url?o.url.format(u(r.params,e||{})):null;return!i.html5Mode()&&a&&(a="#"+i.hashPrefix()+a),n.absolute&&a&&(a=m.protocol()+"://"+m.host()+(80==m.port()||443==m.port()?"":":"+m.port())+(!i.html5Mode()&&a?"/":"")+a),a},w.get=function(t,e){if(!j(t)){var n=[];return M(x,function(t){n.push(t.self)}),n}var r=f(t,e);return r&&r.self?r.self:null},w}function $(t,e,n,r){return t!==e||(n!==e.locals||r.reload)&&t.self.reloadOnSearch!==!1?void 0:!0}var g,w,x={},y={},b="abstract",E={parent:function(t){if(j(t.parent)&&t.parent)return f(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?f(e[1]):g},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=A({},t.parent.data,t.data)),t.data},url:function(t){var e=t.url;if(k(e))return"^"==e.charAt(0)?o.compile(e.substring(1)):(t.parent.navigable||g).url.concat(e);if(o.isMatcher(e)||null==e)return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},params:function(t){if(!t.params)return t.url?t.url.parameters():t.parent.params;if(!U(t.params))throw new Error("Invalid params in state '"+t+"'");if(t.url)throw new Error("Both params and url specicified in state '"+t+"'");return t.params},views:function(t){var e={};return M(j(t.views)?t.views:{"":t},function(n,r){r.indexOf("@")<0&&(r+="@"+t.parent.name),e[r]=n}),e},ownParams:function(t){if(!t.parent)return t.params;var e={};M(t.params,function(t){e[t]=!0}),M(t.parent.params,function(n){if(!e[n])throw new Error("Missing required parameter '"+n+"' in state '"+t.name+"'");e[n]=!1});var n=[];return M(e,function(t,e){t&&n.push(e)}),n},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?A({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};g=p({name:"",url:"^",views:null,"abstract":!0}),g.navigable=null,this.decorator=d,this.state=m,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter"]}function $(){function t(t,e){return{load:function(n,r){var o,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=A(i,r),r.view&&(o=e.fromConfig(r.view,r.params,r.locals)),o&&r.notify&&t.$broadcast("$viewContentLoading",r),o}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function g(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){n(function(){t[0].scrollIntoView()},0,!1)}}]}function w(t,n,r,o,i,a){function s(){return o.has?function(t){return o.has(t)?o.get(t):null}:function(t){try{return o.get(t)}catch(e){return null}}}function u(t,e,n){var r=function(){return{leave:function(t){t.remove()},enter:function(t,e,n){n.after(t)}}};if(h)return function(t){return t?{enter:function(t,e,n){h.enter(t,null,n)},leave:function(t){h.leave(t,function(){t.remove()})}}:r()};if(f){var o=f&&f(n,e);return function(t){return t?{enter:function(t,e){o.enter(t,e)},leave:function(t){o.leave(t.contents(),t)}}:r()}}return r}var c=!1,l=s(),f=l("$animator"),h=l("$animate"),p={restrict:"ECA",compile:function(o,s){var l=o.html(),f=!0,h=e.element(a[0].createComment(" ui-view-anchor ")),d=o.parent();return o.prepend(h),function(a){function m(){g&&(S(!0).leave(g),g=null),$&&($.$destroy(),$=null)}function v(s){var u=t.$current&&t.$current.locals[y];if(f&&(f=!1,o.replaceWith(h)),!u)return m(),g=o.clone(),g.html(l),S(s).enter(g,d,h),$=a.$new(),void n(g.contents())($);if(u!==w){m(),g=o.clone(),g.html(u.$template?u.$template:l),S(!0).enter(g,d,h),g.data("$uiView",C),w=u,C.state=u.$$state;var c=n(g.contents());if($=a.$new(),u.$$controller){u.$scope=$;var p=r(u.$$controller,u);g.children().data("$ngControllerController",p)}c($),$.$emit("$viewContentLoaded"),b&&$.$eval(b),e.isDefined(E)&&E&&!a.$eval(E)||i(g)}}var $,g,w,x=d.inheritedData("$uiView"),y=s[p.name]||s.name||"",b=s.onload||"",E=s.autoscroll,S=u(o,s,a);y.indexOf("@")<0&&(y=y+"@"+(x?x.state.name:""));var C={name:y,state:null},P=function(){if(!c){c=!0;try{v(!0)}catch(t){throw c=!1,t}c=!1}};a.$on("$stateChangeSuccess",P),a.$on("$viewContentLoading",P),v(!1)}}};return p}function x(t){var e=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!e||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1],paramExpr:e[3]||null}}function y(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function b(t,e){return{restrict:"A",require:"?^uiSrefActive",link:function(n,r,o,i){var a=x(o.uiSref),s=null,u=y(r)||t.$current,c="FORM"===r[0].nodeName,l=c?"action":"href",f=!0,h=function(e){if(e&&(s=e),f){var n=t.href(a.state,s,{relative:u});return i&&i.$$setStateInfo(a.state,s),n?void(r[0][l]=n):(f=!1,!1)}};a.paramExpr&&(n.$watch(a.paramExpr,function(t){t!==s&&h(t)},!0),s=n.$eval(a.paramExpr)),h(),c||r.bind("click",function(n){var o=n.which||n.button;0!==o&&1!=o||n.ctrlKey||n.metaKey||n.shiftKey||r.attr("target")||(e(function(){t.go(a.state,s,{relative:u})}),n.preventDefault())})}}}function E(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(r,o,i){function a(){t.$current.self===u&&s()?o.addClass(f):o.removeClass(f)}function s(){return!l||c(l,e)}var u,l,f;f=n(i.uiSrefActive||"",!1)(r),this.$$setStateInfo=function(e,n){u=t.get(e,y(o)),l=n,a()},r.$on("$stateChangeSuccess",a)}]}}function S(t){return function(e){return t.is(e)}}function C(t){return function(e){return t.includes(e)}}function P(t,e){function o(t){this.locals=t.locals.globals,this.params=this.locals.$stateParams}function i(){this.locals=null,this.params=null}function a(n,a){if(null!=a.redirectTo){var s,c=a.redirectTo;if(k(c))s=c;else{if(!T(c))throw new Error("Invalid 'redirectTo' in when()");s=function(t,e){return c(t,e.path(),e.search())}}e.when(n,s)}else t.state(r(a,{parent:null,name:"route:"+encodeURIComponent(n),url:n,onEnter:o,onExit:i}));return u.push(a),this}function s(t,e,r){function o(t){return""!==t.name?t:n}var i={routes:u,params:r,current:n};return e.$on("$stateChangeStart",function(t,n,r,i){e.$broadcast("$routeChangeStart",o(n),o(i))}),e.$on("$stateChangeSuccess",function(t,n,r,a){i.current=o(n),e.$broadcast("$routeChangeSuccess",o(n),o(a)),I(r,i.params)}),e.$on("$stateChangeError",function(t,n,r,i,a,s){e.$broadcast("$routeChangeError",o(n),o(i),s)}),i}var u=[];o.$inject=["$$state"],this.when=a,this.$get=s,s.$inject=["$state","$rootScope","$routeParams"]}var j=e.isDefined,T=e.isFunction,k=e.isString,O=e.isObject,U=e.isArray,M=e.forEach,A=e.extend,I=e.copy;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),f.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",f),h.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",h),p.prototype.concat=function(t){return new p(this.sourcePath+t+this.sourceSearch)},p.prototype.toString=function(){return this.source},p.prototype.exec=function(t,e){var n=this.regexp.exec(t);if(!n)return null;var r,o=this.params,i=o.length,a=this.segments.length-1,s={};if(a!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(r=0;a>r;r++)s[o[r]]=n[r+1];for(;i>r;r++)s[o[r]]=e[o[r]];return s},p.prototype.parameters=function(){return this.params},p.prototype.format=function(t){var e=this.segments,n=this.params;if(!t)return e.join("");var r,o,i,a=e.length-1,s=n.length,u=e[0];for(r=0;a>r;r++)i=t[n[r]],null!=i&&(u+=encodeURIComponent(i)),u+=e[r+1];for(;s>r;r++)i=t[n[r]],null!=i&&(u+=(o?"&":"?")+n[r]+"="+encodeURIComponent(i),o=!0);return u},e.module("ui.router.util").provider("$urlMatcherFactory",d),m.$inject=["$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",m),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],e.module("ui.router.state").value("$stateParams",{}).provider("$state",v),$.$inject=[],e.module("ui.router.state").provider("$view",$),e.module("ui.router.state").provider("$uiViewScroll",g),w.$inject=["$state","$compile","$controller","$injector","$uiViewScroll","$document"],e.module("ui.router.state").directive("uiView",w),b.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",b).directive("uiSrefActive",E),S.$inject=["$state"],C.$inject=["$state"],e.module("ui.router.state").filter("isState",S).filter("includedByState",C),P.$inject=["$stateProvider","$urlRouterProvider"],e.module("ui.router.compat").provider("$route",P).directive("ngView",w)}(window,window.angular);